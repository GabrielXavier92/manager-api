# Migration `20200628155803-init`

This migration has been generated by Gabriel Xavier at 6/28/2020, 3:58:03 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Specialty" (
"accountId" text  NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"doctorId" text   ,"id" text  NOT NULL ,"name" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Procedure" (
"accountId" text  NOT NULL ,"code" text  NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"name" text  NOT NULL ,"specialtyId" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL ,"value" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Account" ALTER COLUMN "plan" SET DEFAULT E'STARTER';

ALTER TABLE "public"."Specialty" ADD FOREIGN KEY ("accountId")REFERENCES "public"."Account"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Specialty" ADD FOREIGN KEY ("doctorId")REFERENCES "public"."Doctor"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Procedure" ADD FOREIGN KEY ("accountId")REFERENCES "public"."Account"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Procedure" ADD FOREIGN KEY ("specialtyId")REFERENCES "public"."Specialty"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200628123428-init..20200628155803-init
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -69,8 +69,9 @@
   street String?
   neighborhood String?
   complement String?
   guides Guide[] // Relacionamento com as guias
+  specialties Specialty[] // Relacionamento com as especialidades
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
@@ -96,5 +97,28 @@
   patientId String // Relacionamento com um Patient
   description String
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
+}
+
+model Specialty {
+  id String          @id @default(uuid())
+  account Account @relation(fields: [accountId], references: [id]) // Relacionamento com a conta
+  accountId String // Relacionamento com a conta
+  name String
+  procedures Procedure[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+model Procedure {
+  id String          @id @default(uuid())
+  account Account @relation(fields: [accountId], references: [id]) // Relacionamento com a conta
+  accountId String // Relacionamento com a conta
+  name String
+  code String
+  value String
+  specialty Specialty @relation(fields: [specialtyId], references: [id]) // Relacionamento com uma especialidade
+  specialtyId String // Relacionamento com uma especialidade
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
 }
```


